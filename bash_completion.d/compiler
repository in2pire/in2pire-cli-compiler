#!/bin/bash

# Bash Completion for CLI Compiler (1.0.11)
# Generated by IN2PIRE CLI Framework (https://github.com/in2pire/in2pire-cli)

_compiler() {
    COMPREPLY=()
    local cur=${COMP_WORDS[COMP_CWORD]}
    local prev=${COMP_WORDS[COMP_CWORD-1]}
    local options=("--help" "--quiet" "--verbose" "--version" "--ansi" "--no-ansi" "--no-interaction" "--bash-completion")
    local arrayOptions=()

    if [ $COMP_CWORD -eq 1 ]; then
        if [[ ${cur} == -* ]] ; then
            COMPREPLY=( $( compgen -W "${options[*]}" -- $cur) )
        else
            commands=("help" "list" "compile")
            COMPREPLY=( $( compgen -W "${commands[*]}" -- $cur) )
        fi
        return 0
    fi

    case "${COMP_WORDS[1]}" in
        "help")
            options+=("--xml" "--format" "--raw")
        ;;
        "list")
            options+=("--xml" "--raw" "--format")
        ;;
        "compile")
            options+=("--project-path" "--config-path" "--build-version" "--build-date" "--exclude-file" "--no-compress" "--no-optimize" "--no-executable" "--no-hidden-input" "--phar")
            arrayOptions+=("exclude-file")
        ;;
    esac

    filteredOptions=()
    for opt in "${options[@]}"; do
        skip=
        for word in "${COMP_WORDS[@]}"; do
            if [[ $opt == $word ]]; then
                skip=1
                for optArr in "${arrayOptions[@]}"; do
                    [[ $opt == $optArr ]] && { skip=; break; }
                done
                [[ -n $skip ]] && break;
            fi
        done
        [[ -n $skip ]] || filteredOptions+=("$opt");
    done

    COMPREPLY=( $( compgen -W "${filteredOptions[*]}" -- $cur) )
}

complete -F _compiler compiler


